--- a/packages/backend/src/plugins/auth.ts
+++ b/packages/backend/src/plugins/auth.ts
@@ -38 +38 @@ export default async function createPlugin(
-      github: providers.github.create({
+      gitlab: providers.gitlab.create({
@@ -40,8 +40,11 @@ export default async function createPlugin(
-          resolver(_, ctx) {
-            const userRef = 'user:default/guest'; // Must be a full entity reference
-            return ctx.issueToken({
-              claims: {
-                sub: userRef, // The user's own identity
-                ent: [userRef], // A list of identities that the user claims ownership through
-              },
-            });
+          async resolver(info, ctx) {
+            const { fullProfile } = info.result;
+
+            const userId = fullProfile.username;
+            if (!userId) {
+              throw new Error(
+                `GitLab user profile does not contain a username`,
+              );
+            }
+
+            return ctx.signInWithCatalogUser({ entityRef: { name: userId } });
@@ -49 +51,0 @@ export default async function createPlugin(
-          // resolver: providers.github.resolvers.usernameMatchingUserEntityName(),